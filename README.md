# 员工绩效互评系统

一个基于Flask的员工绩效互评打分Web应用，支持人员信息维护、评估维度管理、绩效打分和评估结果查询等功能。

## 功能模块

1. **人员信息维护**：管理评估对象清单，支持员工信息的增删改查
2. **评估管理**：设定打分维度及权重，支持维度的增删改查
3. **评估打分**：员工间互相打分，支持保存草稿和提交功能
4. **评估查询**：查询评估结果，支持退回、汇总统计和Excel导出

## 技术栈

- **后端**：Python 3.8+, Flask, Flask-SQLAlchemy
- **前端**：HTML5, Bootstrap 5, JavaScript, jQuery
- **数据库**：SQLite (默认), 可配置为MySQL等其他数据库
- **依赖管理**：pip

## 安装部署步骤

### 1. 环境准备

确保已安装Python 3.8及以上版本和pip：

```bash
python3 --version
pip3 --version
```

### 2. 获取代码

```bash
# 克隆仓库或下载代码到本地
cd /path/to/your/workspace
# 如果是克隆仓库
# git clone <repository-url>
cd my_pes
```

### 3. 安装依赖

使用pip安装所需依赖：

```bash
pip3 install -r requirements.txt
```

### 4. 配置应用（可选）

默认配置已足够启动应用，如需自定义配置，可创建`.env`文件：

```
FLASK_APP=app.py
FLASK_ENV=development
FLASK_DEBUG=1
DATABASE_URI=sqlite:///performance.db
SECRET_KEY=your-secret-key-here
```

### 5. 初始化数据库

应用会在首次运行时自动创建数据库表并添加默认评估维度，无需额外操作。

### 6. 启动应用

```bash
# 方法1: 使用Flask命令
flask run

# 方法2: 直接运行Python文件
python3 app.py
```

应用启动后，默认会在 http://127.0.0.1:5000/ 运行

## 使用指南

### 访问入口

- **评估打分页面**：http://127.0.0.1:5000/evaluate
- **管理后台**：http://127.0.0.1:5000/admin

### 基本使用流程

1. **管理员操作**：
   - 访问管理后台，先维护员工信息
   - 设置评估维度及权重（系统已预置默认维度）
   - 查看评估结果，进行汇总和导出

2. **员工操作**：
   - 访问评估打分页面
   - 选择自己作为评估者
   - 为其他员工打分并提交

## 功能详情

### 人员信息维护

- 添加新员工：点击"添加员工"按钮，填写姓名和岗位
- 编辑员工：点击列表中的"编辑"按钮修改信息
- 删除员工：点击列表中的"删除"按钮移除员工

### 评估维度管理

- 系统默认提供5个评估维度：本职工作(50%)、附加业绩(20%)、合规守纪(15%)、互助(10%)、勤勉(5%)
- 可自定义添加、编辑或删除维度
- 所有维度权重总和必须为100%

### 评估打分

- 选择自己作为评估者
- 从列表中选择要评估的同事
- 为每个维度打分（1-5分）
- 可随时点击"保存草稿"，完成后点击"提交评估"
- 提交后如需修改，需管理员在查询模块中退回

### 评估查询

- 按评估对象和状态筛选评估记录
- 查看评估详情：点击"查看"按钮
- 退回评估：对已提交的评估，点击"退回"让提交者重新编辑
- 汇总统计：查看所有评估的汇总表格
- 导出Excel：点击"导出汇总表"按钮下载xlsx文件

## 注意事项

- 本应用为简化版本，未实现用户认证功能，实际部署时建议添加
- 生产环境中应使用更安全的数据库配置和密钥管理
- 对于大规模使用，建议优化数据库性能和添加缓存机制

## 故障排除

- **无法启动应用**：检查Python版本和依赖是否安装正确
- **数据库错误**：删除`performance.db`文件后重新启动应用，会自动重建数据库
- **端口占用**：修改`app.py`中的`port`参数或关闭占用端口的进程

## 联系方式

如有任何问题或建议，请联系系统管理员。